<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prendre un ticket | WaQtek</title>
    <style>
        :root {
            --bg-1: #f2f7fb;
            --bg-2: #dcebf7;
            --card: #ffffff;
            --title: #12314c;
            --text: #34556f;
            --muted: #607d95;
            --accent: #0f4f7a;
            --normal: #2e7d32;
            --normal-press: #1f5a23;
            --vip: #f3c623;
            --vip-press: #d6a908;
            --surface: #eef5fc;
            --ok: #1f7a2b;
            --warn: #8b6d00;
            --border: #c3d8eb;
            --shadow: 0 20px 40px rgba(13, 53, 84, 0.16);
            --radius: 20px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            min-height: 100vh;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            color: var(--text);
            background: radial-gradient(circle at 12% 10%, #ffffff 0%, #ffffff00 38%), linear-gradient(150deg, var(--bg-1) 0%, var(--bg-2) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 18px;
        }

        .kiosk {
            width: min(920px, 100%);
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: clamp(20px, 3.2vw, 36px);
        }

        .topbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 14px;
            margin-bottom: clamp(22px, 3vw, 32px);
        }

        .brand {
            font-size: clamp(1.2rem, 2vw, 1.6rem);
            color: var(--title);
            font-weight: 700;
            letter-spacing: 0.3px;
        }

        .lang-wrap {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 8px 10px;
        }

        .lang-wrap label {
            font-size: 0.92rem;
            color: var(--muted);
            font-weight: 600;
        }

        .lang-wrap select {
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 6px 10px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--title);
            background: #fff;
        }

        .lang-wrap select:focus {
            outline: 3px solid #98c5e8;
            outline-offset: 1px;
        }

        h1 {
            color: var(--title);
            font-size: clamp(2rem, 5vw, 3rem);
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: var(--muted);
            font-size: clamp(1rem, 2.1vw, 1.35rem);
            margin-bottom: clamp(20px, 4vw, 34px);
            font-weight: 500;
        }

        .ticket-buttons {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 16px;
        }

        .kiosk-context {
            margin-bottom: 16px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 10px 12px;
            text-align: center;
        }

        .kiosk-context-title {
            font-size: 0.86rem;
            color: var(--muted);
            margin-bottom: 4px;
            font-weight: 600;
        }

        .kiosk-context-value {
            color: var(--title);
            font-weight: 700;
            font-size: 0.98rem;
        }

        .ticket-btn {
            border: none;
            border-radius: 18px;
            min-height: clamp(110px, 17vh, 156px);
            font-size: clamp(1.2rem, 2.4vw, 1.8rem);
            font-weight: 700;
            color: #ffffff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: transform 0.12s ease, filter 0.12s ease, box-shadow 0.12s ease;
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.16);
            touch-action: manipulation;
            user-select: none;
        }

        .ticket-btn:active,
        .ticket-btn.is-pressed {
            transform: scale(0.98);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        .ticket-btn:focus-visible {
            outline: 4px solid #8ec2e8;
            outline-offset: 2px;
        }

        .ticket-btn svg {
            width: clamp(26px, 3vw, 40px);
            height: clamp(26px, 3vw, 40px);
            flex: 0 0 auto;
        }

        .ticket-normal {
            background: linear-gradient(165deg, #3fa746 0%, var(--normal) 100%);
        }

        .ticket-normal:active,
        .ticket-normal.is-pressed {
            background: linear-gradient(165deg, #2d9134 0%, var(--normal-press) 100%);
        }

        .ticket-vip {
            color: #3a3100;
            background: linear-gradient(165deg, #f9df72 0%, var(--vip) 100%);
        }

        .ticket-vip:active,
        .ticket-vip.is-pressed {
            background: linear-gradient(165deg, #edcf4b 0%, var(--vip-press) 100%);
        }

        .feedback {
            margin-top: 20px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 14px 16px;
            min-height: 84px;
            display: grid;
            align-content: center;
            gap: 5px;
        }

        .feedback-title {
            font-weight: 700;
            color: var(--accent);
            font-size: 1.06rem;
        }

        .feedback-msg {
            font-size: 0.96rem;
            color: var(--muted);
        }

        .feedback.ok .feedback-title { color: var(--ok); }
        .feedback.warn .feedback-title { color: var(--warn); }

        .footer-note {
            text-align: center;
            margin-top: 12px;
            font-size: 0.86rem;
            color: #6a859b;
        }

        html[dir="rtl"] .topbar {
            flex-direction: row-reverse;
        }

        html[dir="rtl"] .ticket-btn {
            flex-direction: row-reverse;
        }

        @media (max-width: 820px) {
            .ticket-buttons {
                grid-template-columns: 1fr;
            }

            .topbar {
                align-items: stretch;
                flex-direction: column;
            }

            .lang-wrap {
                justify-content: center;
            }
        }

        @media (max-height: 700px) {
            body {
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <main class="kiosk" aria-live="polite">
        <div class="topbar">
            <p class="brand">WaQtek Kiosk</p>
            <div class="lang-wrap">
                <label for="langSelect" id="langLabel">Langue</label>
                <select id="langSelect" aria-labelledby="langLabel">
                    <option value="fr">FR</option>
                    <option value="ar">AR</option>
                </select>
            </div>
        </div>

        <h1 id="title">Prendre un ticket</h1>
        <p class="subtitle" id="subtitle">Appuyez pour obtenir votre ticket</p>
        <section class="kiosk-context">
            <p id="contextTitle" class="kiosk-context-title">Kiosk actif</p>
            <p id="contextValue" class="kiosk-context-value">Chargement de la configuration...</p>
        </section>

        <section class="ticket-buttons" aria-label="Actions de ticket">
            <button id="normalBtn" class="ticket-btn ticket-normal" type="button">
                <svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor">
                    <path d="M3 8a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v2a2 2 0 0 0 0 4v2a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-2a2 2 0 0 0 0-4V8zm5 1v6h2V9H8zm4 0v6h4v-2h-2v-1h2v-2h-4z"></path>
                </svg>
                <span id="normalLabel">Ticket Normal</span>
            </button>

            <button id="vipBtn" class="ticket-btn ticket-vip" type="button">
                <svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor">
                    <path d="M4 18h16l-1.2-7.8a1 1 0 0 0-1.72-.57L14 13 12.2 6.8a1 1 0 0 0-1.92 0L8.5 13 6 9.63a1 1 0 0 0-1.78.58L4 18zm1.7 2a1 1 0 1 0 0 2h12.6a1 1 0 1 0 0-2H5.7z"></path>
                </svg>
                <span id="vipLabel">Ticket VIP</span>
            </button>
        </section>

        <section id="feedback" class="feedback" role="status">
            <p id="feedbackTitle" class="feedback-title">En attente</p>
            <p id="feedbackMessage" class="feedback-msg">Selectionnez un type de ticket pour continuer.</p>
        </section>

        <p id="footerNote" class="footer-note">Ecran adapte aux tablettes et bornes tactiles.</p>
    </main>

    <script src="../js/config.js"></script>
    <script src="../js/core/StateManager.js"></script>
    <script src="../js/core/ApiClient.js"></script>
    <script src="../js/core/WebSocketClient.js"></script>
    <script src="../js/init.js"></script>
    <script src="../js/services/AuthService.js"></script>
    <script src="../js/services/EstablishmentService.js"></script>
    <script src="../js/services/QueueService.js"></script>
    <script src="../js/services/TicketService.js"></script>
    <script src="../js/services/StatsService.js"></script>
    <script src="../js/services/RealtimeService.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/pages/client/take-ticket.js"></script>
    <script src="../js/pages.js"></script>
    <script src="../js/components/dynamic-menu.js"></script>
</body>
</html>
